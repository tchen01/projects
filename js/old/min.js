(function(a){a.fn.swipe=function(f,n){var i=yinit=0;var k=dt=0;var o=dy=0;var b=0;var j=action=interval=null;var e=a.extend({threshold:200,refresh:15,ratio:1},n);a(this).one("mousedown touchstart",h);function h(p){a(this).one("mouseup touchend touchcancel",g);action=p.type;if(action=="mousedown"){i=p.clientX;yinit=p.clientY}else{if(action=="touchstart"){i=p.originalEvent.targetTouches[0].clientX;yinit=p.originalEvent.targetTouches[0].clientY;el=document.elementFromPoint(i,yinit)}}k=m();action="start";a(this).on("mousemove touchmove",d);a(document).one("keydown",l);interval=setInterval(function(){console.log("interval");dt=m()-k;j=c(o,dy);f(j,action,dt,o,dy,i,yinit)},e.refresh)}function l(){console.log("escape");clearInterval(interval)}function m(){return new Date().getTime()}function d(p){action=p.type;if(i!=0){if(action=="mousemove"){o=p.clientX-i;dy=p.clientY-yinit}else{if(action=="touchmove"){o=p.originalEvent.targetTouches[0].clientX-i;dy=p.originalEvent.targetTouches[0].clientY-yinit}}}action="move"}function g(q){action=q.type;var p=c(o,dy);i=yinit=0;o=dy=0;a(this).off("mousemove touchmove",d);action="end";f(p,action,dt,o,dy,i,yinit);a(this).one("mousedown touchstart",h);a(document).off("keydown",l);l()}function c(q,p){b=q*q+p*p;theta=Math.atan2(p,q);xy=Math.abs(q/p);if(b>e.threshold*e.threshold){if(xy>e.ratio){if(q>0){return"left"}else{return"right"}}else{if(p>0){return"down"}else{return"up"}}}else{return"cancel"}}}}(jQuery));